{"ast":null,"code":"'use strict';\n\nvar assert = require('assert');\n\nvar Class = require('./class');\n\nvar Base = require('./base');\n\nvar Record = require('./record');\n\nvar Table = require('./table');\n\nvar AirtableError = require('./airtable_error');\n\nvar Airtable = Class.extend({\n  init: function init(opts) {\n    opts = opts || {};\n    var default_config = Airtable.default_config();\n    this._apiKey = opts.apiKey || Airtable.apiKey || default_config.apiKey;\n    this._endpointUrl = opts.endpointUrl || Airtable.endpointUrl || default_config.endpointUrl;\n    this._apiVersion = opts.apiVersion || Airtable.apiVersion || default_config.apiVersion;\n    this._apiVersionMajor = this._apiVersion.split('.')[0];\n    this._allowUnauthorizedSsl = opts.allowUnauthorizedSsl || Airtable.allowUnauthorizedSsl || default_config.allowUnauthorizedSsl;\n    this._noRetryIfRateLimited = opts.noRetryIfRateLimited || Airtable.noRetryIfRateLimited || default_config.noRetryIfRateLimited;\n    this.requestTimeout = opts.requestTimeout || default_config.requestTimeout;\n    assert(this._apiKey, 'API key is required to connect to Airtable');\n  },\n  base: function base(baseId) {\n    return Base.createFunctor(this, baseId);\n  }\n});\n\nAirtable.default_config = function () {\n  return {\n    endpointUrl: process.env.AIRTABLE_ENDPOINT_URL || 'https://api.airtable.com',\n    apiVersion: '0.1.0',\n    apiKey: process.env.AIRTABLE_API_KEY,\n    allowUnauthorizedSsl: false,\n    noRetryIfRateLimited: false,\n    requestTimeout: 300 * 1000 // 5 minutes\n\n  };\n};\n\nAirtable.configure = function (opts) {\n  Airtable.apiKey = opts.apiKey;\n  Airtable.endpointUrl = opts.endpointUrl;\n  Airtable.apiVersion = opts.apiVersion;\n  Airtable.allowUnauthorizedSsl = opts.allowUnauthorizedSsl;\n  Airtable.noRetryIfRateLimited = opts.noRetryIfRateLimited;\n};\n\nAirtable.base = function (baseId) {\n  return new Airtable().base(baseId);\n};\n\nAirtable.Base = Base;\nAirtable.Record = Record;\nAirtable.Table = Table;\nAirtable.Error = AirtableError;\nmodule.exports = Airtable;","map":null,"metadata":{},"sourceType":"script"}